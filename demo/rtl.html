<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta
			name="viewport"
			content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes"
		/>
		<title>cosmoz-treenode-navigator demo</title>
	</head>

	<body>
		<h1>Cosmoz-treenode-button-view rtl test</h1>

		<div class="vertical-section-container">
			<h2>
				Demonstrate issue caused by using direction: rtl to render the button
				label
			</h2>
			<p>Select node 1/2/3, and watch the button label</p>
			<section id="demo1"></section>
		</div>

		<script type="module">
			import { render, html } from 'lit-html';
			import { DefaultTree } from '@neovici/cosmoz-tree/cosmoz-default-tree';
			import '../src/cosmoz-treenode-button-view.ts';

			const getTree = (data) => {
				if (data) {
					return new DefaultTree(data);
				}
			};

			// TODO have this as a single helper function
			const initTemplate = ({ dataSource, domId, multiSelection = false }) => {
				fetch(dataSource)
					.then((response) => response.json())
					.then((jsonForTree) => {
						render(
							html` <cosmoz-treenode-button-view
								.tree=${getTree(jsonForTree)}
								button-text-placeholder="Select a node"
								search-placeholder="Search..."
								search-global-placeholder="Click to search again but globally"
								.searchMinLength=${3}
								.multiSelection=${multiSelection}
								dialog-text="Search or navigate to chosen destination"
							></cosmoz-treenode-button-view>`,
							document.body.querySelector(domId),
						);
					})
					.catch((e) => {
						// eslint-disable-next-line no-console
						console.error(`Failed to fetch local JSON resource: ${e.message}`);
					});
			};

			(function () {
				initTemplate({ dataSource: './data/rtl.json', domId: '#demo1' });
			})();
		</script>
	</body>
</html>
