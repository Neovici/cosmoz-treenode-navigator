<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta
			name="viewport"
			content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes"
		/>
		<title>cosmoz-treenode-navigator demo</title>
		<style>
			body {
					background-color: #eeeff3;
          font-family: 'Roboto', 'Noto', sans-serif;
			}

			h1, h2 {
					font-weight: 500;
			}

      #demo2 cosmoz-treenode-button-view::part(action-open) {
          width: 100%;
	        padding-top: 12px;
	        padding-bottom: 12px;
      }
		</style>
	</head>

	<body>
		<h1>Cosmoz-treenode-navigator</h1>

		<div class="vertical-section-container">
			<h2>Navigator with multiple root tree data structure</h2>
			<p>
				The tree data structure simulate a Windows file system, with 2 drives C:
				and D:
			</p>
			<section id="demo1"></section>
		</div>

		<div class="vertical-section-container">
			<h2>
				Navigator with multiple root tree data structure and missing ancestor
				nodes
			</h2>
			<p>
				The tree data structure is based on the one in the demo above, but
				showing only files accessible to a specific user.
			</p>
			<section id="demo2"></section>
		</div>

		<script type="module">
			import { render, html } from 'lit-html';
			import { DefaultTree } from '@neovici/cosmoz-tree/cosmoz-default-tree';
      import '../src/cosmoz-treenode-button-view.ts';

			const getTree = (data) => {
				if (data) {
					return new DefaultTree(data);
				}
			};

			const initTemplate = ({
        dataSource,
        domId,
        multiSelection = false,
        noReset = false,
        buttonTextPlaceholder = 'Select a node',
        searchPlaceholder = 'Search...',
        searchGlobalPlaceholder = 'Click to search again but globally',
        searchMinLength = 3,
        dialogText = 'Search or navigate to chosen destination'
      }) => {
				fetch(dataSource)
					.then((response) => response.json())
					.then((jsonForTree) => {
						render(
							html`<cosmoz-treenode-button-view
								.tree=${getTree(jsonForTree)}
								button-text-placeholder=${buttonTextPlaceholder}
								search-placeholder=${searchPlaceholder}
								search-global-placeholder=${searchGlobalPlaceholder}
								search-min-placeholder=${searchMinLength}
								.searchMinLength=${3}
								.multiSelection=${multiSelection}
								.noReset=${noReset}
								dialog-text=${dialogText}
							></cosmoz-treenode-button-view>`,
							document.body.querySelector(domId),
						);
					})
					.catch((e) => {
						// eslint-disable-next-line no-console
						console.error(`Failed to fetch local JSON resource: ${e.message}`);
					});
			};

			(function () {
				initTemplate({ dataSource: './data/adminFiles.json', domId: '#demo1', noReset: true });
				initTemplate({
					dataSource: './data/johnFiles.json',
					domId: '#demo2',
					multiSelection: true,
					buttonTextPlaceholder: 'Select a node',
					searchPlaceholder: 'Search...',
					searchGlobalPlaceholder: 'Click to search again but globally',
					searchMinLength: 3,
					dialogText: 'Search or navigate',
				});
			})();
		</script>
	</body>
</html>
